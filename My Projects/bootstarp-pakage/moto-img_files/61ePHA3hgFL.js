(function(g){var k=window.AmazonUIPageJS||window.P,n=k._namespace||k.attributeErrors,d=n?n("DetailPageImageBlockAssets"):k;d.guardFatal?d.guardFatal(g)(d,window):d.execute(function(){g(d,window)})})(function(g,k,n){g.register("postMetric",function(){return{postCountMetric:function(a){if("undefined"!==typeof a){var b=k.ue;if(b){var c=b.count(a)||0;b.count(a,c+1)}}},postTimeMetric:function(a,b){if("undefined"!==typeof a&&"undefined"!==typeof b){var c=k.ue;c&&c.count(a,b)}}}});g.register("logFailedInteractionMetric",
function(){return{isEnabled:!1}});g.register("postEarlyMetric",function(){return null});g.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(a,b,c,d){a=a.extend(!0,{},c,d);var f=new b(a);g.register("ImageBlockAPI",function(){return f.api});return f});g.when("A","jQuery","ImageBlockBTF").register("ImageBlockAiryLoader",function(a,b,c){a=c.airyConfig;a.jsUrl&&g.load.js(a.jsUrl);a.cssUrl&&g.load.css(a.cssUrl)});
g.when("A","jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(a,b,c,d,f,g){var n={};return function(a){var z=this;z.dispatch=function(a,c){var d=n[a];f.isDefined(d)&&b.each(d,function(a,b){b.call(k,c)})};z.register=function(a,b){f.isDefined(n[a])||(n[a]=[]);"function"===typeof b&&n[a].push(b)};z.model=new c(a,z);z.view=new d(a,z,z.model);z.api=new g(a,z,z.model);z.init=function(){z.model.init();z.view.init()};z.init()}});
g.when("A","jQuery","imageBlockUtils").register("ImageBlockModel",function(a,b,c){function d(a,b,f,e,l){c.isDefined(a)&&(x.type=a);c.isDefined(b)&&(x.index=b);c.isDefined(f)&&(x.thumbnailIndex=f);c.isDefined(e)&&(x.variant=e);c.isDefined(l)&&(x.color=l)}function f(a){d("image",0,0,"MAIN",a||z.landingAsinColor||z.defaultColor)}function g(b){b=b.data;u=a.copy(x);d(b.type,b.index,b.thumbnailIndex,b.variant,b.color)}function k(b){g(b);b=a.copy(b);b.data=a.copy(x);v.dispatch("updateView",b)}function n(){u=
a.copy(x);f(x.color)}var z,v,x={},u={},A,B;return function(b,c){v=c;z=b;v.register("updateSelection",k);v.register("updateModel",g);v.register("resetModel",n);this.init=function(){f()};this.getCurrentItem=function(){return a.copy(x)};this.getPreviousItem=function(){return a.copy(u)};this.setCurrentEvent=function(a){A=a};this.getCurrentEvent=function(){return A};this.setImmersiveViewModalInstance=function(a){B=a};this.getImmersiveViewModalInstance=function(){return B}}});g.when("ImageBlockBTF",
"postMetric").execute(function(a,b){function c(a,b,d,f,e){function h(a){"click"===a.type&&f.postCountMetric("thumbClick");"click"===a.type&&G.overrideAltImageClickAction?P.dispatch("thumbActionClick",a):P.dispatch("updateSelection",a)}function l(a){G.useClickZoom||P.dispatch("imageClick",a)}function g(a){G.useClickZoom||P.dispatch("imageHover",a)}function n(a){P.dispatch("button360Click",a)}function B(b){!d.isDefined(b)||"swatchClick"!==b.type&&"updatedData"!==b.type?(J.update(b),"swatchHover"!==
b.type&&L.getPreviousItem().thumbnailIndex!==b.data.thumbnailIndex&&f.postCountMetric(b.data.type+"ThumbnailSelected"),a.trigger("image-block-thumbnail-selected",b.data)):J.render(b.data.color,!1,b.onload)}function w(a){P.dispatch("resize",a)}function E(a){d.selectThumbnail(a,I)}function q(a){var b=a.data,c;b&&"ingress"!==b.type&&"click"===a.type&&(c=a);return c}function F(a){var b=L.getCurrentItem(),c={type:"click"};c.$declarativeParent=a;c.data=b;return c}var J,G,P,L,I;return function(c,d,f){J=
this;G=c;P=d;L=f;I=b("#imageBlock #altImages ul");var r=b("#imageBlock .canvas"),C=b("#main-image-container"),M;J.subViews=[];for(d=0;d<e.length;d++)J.subViews.push(new e[d](c,f,J,P));J.render=function(a,c,d){var f=0;I.find(".item").remove();a=a||L.getCurrentItem().color;b.each(J.subViews,function(b,e){f=e.render(a,f,r,I,C,c,d)||f});var e=I.find(".a-button-selected").closest(".a-declarative");M=F(e)};J.init=function(){I=b("#imageBlock #altImages ul");var c=I.find(".a-button-selected").closest(".a-declarative"),
d=c.data("action"),c=c.data(d)||{};c.color=G.landingAsinColor||G.defaultColor;P.dispatch("updateModel",{data:c});J.render(c.color,!0);G.isDebug&&k.console&&console.log(G);P.register("updateView",B);P.register("selectThumbnail",E);G.disableHoverOnAltImages||a.declarative("thumb-action",["mouseenter","mouseleave"],h);a.declarative("thumb-action",["click"],h);a.declarative("main-image-click",["click"],l);a.declarative("main-image-click",["mouseenter","mouseleave"],g);a.declarative("button-360-click",
["click"],n);b(k).resize(w)};J.update=function(a){b.each(J.subViews,function(b,c){c.update(a)});G.usePeekHover&&("mouseleave"===a.type?P.dispatch("updateSelection",M):"click"===a.type&&(M=q(a)||M))}}}var d=["A","jQuery","imageBlockUtils","postMetric"].concat(a.views);g.when.apply(g,d).register("ImageBlockView",function(){for(var a=arguments[0],b=arguments[1],d=arguments[2],f=arguments[3],e=[],l=4,g=arguments.length;l<g;l++)e.push(arguments[l]);return c(a,b,d,f,e)})});g.when("A","jQuery",
"imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(a,b,c,d,f,k,n){function r(a,d,f,l){if(!c.isjQueryObjDefined(a.find(".a-button-selected"))){var g=y.getCurrentItem();if(!l||"chromeless-video"!==g.type||!I.autoplayVideo){l=0;"image"===g.type&&(l=Math.max(x(g.color,g.variant),0));var m=d+l;m>=f&&(l=0,m=d);d=c.getImageHash(g.color,l,I);-1!==d&&(O.dispatch("updateModel",{data:{index:l,thumbnailIndex:m,variant:d.variant,
type:"image"}}),d=a.find(".item").get(m),c.selectGivenThumbnail(b(d),a))}}}function z(a,d,f){d=I.colorImages&&I.colorImages[d];var l=a;c.isDefined(d)&&(b.each(d,function(b,d){a<I.maxAlts&&(c.createThumbnail({type:"image",index:b,thumbnailIndex:a,variant:d.variant},d.thumb,R,"imageThumbnail"),a++)}),k.isEnabled&&n.logAltImgRequestPlacedOnThumbnails(b,k,y),r(R,l,a,f));return a}function v(a,c){if("image"===a.type){var d=b("#image-canvas-caption #canvasCaption"),f,h=I.staticStrings,l=I.colorImages,g=
a.color,m=a.index;c&&I.useIV?f=h.clickToExpand:l[g]&&l[g][m].hiRes&&I.useHoverZoom?(f=I.useHoverZoomIpad?h.touchToZoom:I.useClickZoom?h.clickToZoom:h.rollOverToZoom,I.hoverZoomIndicator&&(f="<img src='"+I.staticImages.hoverZoomIcon+"'/>&nbsp;"+f)):I.useIV&&(f=h.clickToExpand);d.html(f)}}function x(a,b){return c.getIndexForVariant(a,b,I)}function u(a,d){var f;b.each(a.main,function(a,b){c.isDefined(f)||(f=parseFloat(b[1]/b[0])<=parseFloat(I.holderRatio)?"a-stretch-vertical":"a-stretch-horizontal")});
var l="a-dynamic-image "+f,g=c.getMaxDimensionsOfMainImage(a.main,H,I),m=g[0],k=g[1],g=b("<div></div>"),m={"max-height":m,"max-width":k};g.addClass(l).css(m).attr({"data-old-hires":a.hiRes,"data-a-manual-replacement":"true",onload:d}).data("a-dynamic-image",a.main);return g}function A(b){var c=Q.find(".swatchHoverExp");b=u(b);c.find(".imgTagWrapper").html(b);a.loadImageManually(b);return c}function B(a){var b=H.css("height");null!==b&&a.find(".imgTagWrapper").css("height",b);a.addClass("selected");
I.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(I.imgTagWrapperClasses)}function w(b,d){if("image"===b.type||"unavailable"===b.type||"lazy-loaded"===b.type){var e=c.getImageHash(b.color,b.index,I);if(-1===e)return e={data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},c.lazyLoadingRequired(b,y,I)?F(b,!1,d):(O.dispatch("updateModel",e),c.showUnavailable(b.color)),-1;var l=Q.find(".item.itemNo"+b.thumbnailIndex);if(!c.isjQueryObjDefined(l)){var l=b.thumbnailIndex,l=Q.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+
l+" maintain-height"),g=u(e,d);l.find(".placeHolder").replaceWith(g);Q.find(".list").append(l);a.loadImageManually(g)}B(l);O.dispatch("loadMagnifier");v(b);I.useIV&&c.isDefined(e.hiRes)&&l.css("cursor","pointer");b.isUserGenerated&&(l=y.getPreviousItem(),g=b.variant,c.isDefined(g)&&l.thumbnailIndex!==b.thumbnailIndex&&(k.isEnabled&&n.logAltImgRequestServed(k),f.postCountMetric("ImageThumbnailSelectedVariant:"+g),0===g.indexOf("IG")&&(f.postCountMetric("IGImageSelectedVariant:"+g),f.postCountMetric("IGImageSelectedEvent:"+
b.interaction))));a.trigger("dp:image-block:update",e)}}function E(b){var d=Math.max(x(b.color,y.getCurrentItem().variant),0),d=c.getImageHash(b.color,d,I);if(-1===d)return c.lazyLoadingRequired(b,y,I)?c.lazyLoadOnHoverEnabled(I)&&(q(".3",!0),c.spinner(Q,!0),a.delay(function(){y.getCurrentEvent().data===b&&F(b,!0)},500)):c.showUnavailable(b.color),-1;var f=A(d);B(f);a.trigger("dp:image-block:update",d)}function q(a,c){c?Q.css("opacity",a):b("#imageBlock").css("opacity",a)}function F(a,b,f){M=b;U=
f;var e=a.color,m=I.colorToAsin[e];if(m&&m.asin){var k={};k.params={asin:m.asin,productGroupID:I.productGroupID,color:e};k.success=function(d){d?(c.ajaxState(m.asin,"success"),I.colorImages[e]=d.colorImage,c.isDefined(I.spin360ColorEnabled)&&(I.spin360ColorEnabled[e]=d.enable360),e===a.color&&(b&&M?a===y.getCurrentEvent().data&&(J(a),E(a)):(d={type:"updatedData",data:y.getCurrentItem(),onload:f||U},O.dispatch("updateView",d))),g.register(c.rankedImagesReadyEvent(m.asin))):c.ajaxState(m.asin,"fail")};
k.error=function(){c.ajaxState(m.asin,"fail")};k.indicator=c.spinner(Q);c.ajaxState(m.asin,void 0)&&"fail"!==c.ajaxState(m.asin,void 0)||(q(".3",b),d.load("/gp/product/features/apparel-main-image/ranked-images.html",k),c.ajaxState(m.asin,"sent"));return I.colorImages&&I.colorImages[e]}}function J(a,d){c.lazyLoadingRequired(a,y,I)||(b("#imageBlock").css("opacity","1"),Q.css("opacity","1"),c.spinner(Q,!1),Q.find("li").removeClass("selected"),b("#image-canvas-caption #canvasCaption").empty(),c.hideUnavailable(),
d&&Q.find(".list .item").remove())}function G(){var d=Q.find(".item .imgTagWrapper"),f=c.getContainerHeight(H,I.holderRatio,I.holderMaxHeight);0<f&&(H.height(f),d.height(f));Q.find("img.a-dynamic-image").each(function(){var d=b(this);d.data("a-manual-replacement")&&a.loadDynamicImage(this);var f=d.data("a-dynamic-image"),f=c.getMaxDimensionsOfMainImage(f,H,I);d.css({"max-height":f[0]+"px","max-width":f[1]+"px"})})}function P(a){v(y.getCurrentItem(),"mouseenter"===a.type)}var L,I,y,O,R,Q,H,M,U,D;return function(a,
b,d,e){L=this;I=a;y=b;O=e;I.colorImages[I.landingAsinColor]=I.colorImages[I.defaultColor];L.render=function(a,b,d,f,e,l,g){Q=d;R=f;H=e;D=z(b,a,l);l||(a=y.getCurrentItem(),c.lazyLoadingRequired(a,y,I)&&O.dispatch("updateModel",{data:{type:"lazy-loaded"}}));J(y.getCurrentItem(),!l);w(y.getCurrentItem(),g);return D};L.update=function(a){var b=a.data;y.setCurrentEvent(a);"ingress"!==b.type&&J(a.data,!1);"swatchHover"===a.type?b.color===y.getCurrentItem().color?w(y.getCurrentItem()):a.captured||-1===E(b)||
(a.captured=!0):"image"===b.type&&(b.interaction=a.type,b.isUserGenerated=!0,"mouseenter"===a.type&&f.postCountMetric("dpcc_imageThumbHovered_"+(b.thumbnailIndex+1)+"_"+D),w(b),I.usePeekHover&&"click"!==a.type||(c.selectGivenThumbnail(a.$declarativeParent,R),"click"===a.type&&f.postCountMetric("dpcc_imageThumbClicked_"+(b.thumbnailIndex+1)+"_"+D)))};O.register("imageHover",P);O.register("resize",G)}});g.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",
function(a,b,c,d,f,g){function C(a){q?a.css("cursor","url('"+u.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function r(a){var b=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(c.isDefined(b))for(var b=b[1].split("_"),d=0;d<b.length;d++){var f=b[d].match(/^([A-Z]+)(\d+(\.\d+)?)$/);c.isDefined(f)&&(a[f[1]]=parseInt(f[2],10))}return a}function z(a,n){function z(){var a;n.useClickZoom?(a=n.offsetInClickZoom,a=[Math.min(1,
Math.max(0,U[0]-(T[0]+a))/(T[2]-2*a)),Math.min(1,Math.max(0,U[1]-(T[1]+a))/(T[3]-2*a))]):a=M&&M.updatePosition();if(a&&H&&H.detailSize){var b=[H.detailSize[0]-H.rect.width,H.detailSize[1]-H.rect.height];H.detailImage.get(0).style.left=-(a[0]*b[0])+"px";H.detailImage.get(0).style.top=-(a[1]*b[1])+"px"}}function v(a){var b=Z?a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:"";U=Z?[b.pageX,b.pageY]:[a.pageX,a.pageY]}function w(b){Z&&b.preventDefault();v(b);n.useClickZoom?b=[T[0],T[1],T[0]+
T[2],T[1]+T[3]]:(b=M?M.offset:a.offsetParent().offset(),b=[D[0]+b.left,D[1]+b.top,D[0]+D[2]+b.left,D[1]+D[3]+b.top]);U[0]<b[0]||U[1]<b[1]||U[0]>=b[2]||U[1]>=b[3]?(n.fadeMagnifier?ea||(ea=!0,ra=setTimeout(function(){x(!0)},500)):n.useClickZoom||x(),ha&&(ha=!1,clearTimeout(ka))):(ha||(ha=!0,ka=setTimeout(function(){d.postCountMetric("dppc_hoverZoomOpened");f.isEnabled&&g.logHoverZoomRequestServed(f)},1E3)),n.fadeMagnifier&&ea&&(ea=!1,clearTimeout(ra)),z())}function x(c){c&&B.suppressMagnifier(!0);if(W&&
(H&&H.hide(),M&&(M.destroy(),M=null),W=!1,Z?(a.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),b(document).trigger("disengaged.magnifier")):b(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),A(),c))a.one("click.magnifier touchstart.magnifier",function(a){y(a,!0)})}function y(c,f){f&&B.suppressMagnifier(!1);if(!W&&!V&&(0===aa&&(d.postCountMetric("dppc_hoverTime",new Date-(k.ue&&k.ue.t0||0)),aa=1),ia[ba]||(d.postCountMetric("dppc_hoverMain"),ia[ba]=1),D=
[a.position().left,a.position().top,a.width(),a.height()],ba&&(v(c),H?H.refit().show():H=new sa,n.useClickZoom||(M=M||new na),T=H.getWindowSize(),z()),W=!0,Z?(a.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",w).bind("touchend.magnifier",x),b(document).trigger("engaged.magnifier")):(a.unbind("mousemove.magnifier"),b(document).trigger("engaged.magnifier").bind("mousemove.magnifier",w)),f)){var h=b("#zoomWindow");if(0<h.length)h.one("click.magnifier touchend.magnifier",
function(a){x(!0)})}}function A(){n.useHoverZoom&&(Z?a.bind("touchstart.magnifier touchmove.magnifier",y):a.bind("mousemove.magnifier",y))}var B=this,E={detailImageUrl:a.attr("data-old-hires"),location:"over",locationElement:a,prelaod:"ready",zIndex:50,offsetInClickZoom:50};n=b.extend(E,n);n.adjustment=[10,0,-10,0];var H=null,M=null,U=null,D=null,T=null,N={"null":1,"":1,undefined:1},W=!1,V=!1,ba=n.detailImageUrl,Z=n.useHoverZoomIpad||0,aa=0,ia={},na=function(){function c(b){var d=Math.round(Math.min(a.width(),
H.rect.width/b));b=Math.round(Math.min(a.height(),H.rect.height/b));g.css({width:d,height:b});f=[d,b]}var d=this,f=[0,0],h=(H.detailSize&&H.detailSize[0]||5E8)/D[2],l=(H.detailSize&&H.detailSize[1]||5E8)/D[3],h=l>h?l:h;b("#magnifierLens").remove();var g=b("<div id='magnifierLens' />").css({backgroundImage:"url("+n.generalImageUrls.zoomLensBackground+")",position:"absolute"});u.showMagnifierOnHover?C(g):g.css("cursor","pointer");d.updatePosition=function(){var a=[D[2]-f[0],D[3]-f[1]],b=0>=a[0]?.5:
Math.max(0,Math.min(1,(U[0]-f[0]/2-D[0]-d.offset.left)/a[0])),c=0>=a[1]?.5:Math.max(0,Math.min(1,(U[1]-f[1]/2-D[1]-d.offset.top)/a[1])),e=D[0]+Math.round(b*a[0]),a=D[1]+Math.round(c*a[1]);g.get(0).style.left=e+"px";g.get(0).style.top=a+"px";return[b,c]};d.destroy=function(){g.remove()};d.offset=a.offsetParent().offset();c(h);d.updatePosition();g.appendTo(a.parent());H.detailImage[0].complete||H.detailImage.load(function(){var a=H.detailImage.width()/D[2];c(a);d.updatePosition()})};na.preload=function(){B.preload(n.generalImageUrls.lensBackgroundUrl)};
var sa=function(){function d(){var f={};if("over"===n.location){var f=n.useClickZoom,m={},r=b("#leftCol"),C=b("#centerCol"),z=b("#rightCol"),q=b("#hover-zoom-end"),t=b("#actionPanelContainer"),u=c.isjQueryObjDefined(r)?r.outerHeight():C.outerHeight();m.top=c.isjQueryObjDefined(r)?r.offset().top:C.offset().top;m.bottom=u+m.top;m.right=c.isjQueryObjDefined(z)?z.offset().left:t.offset().left;m.left=f?0:r.offset().left+r.outerWidth();c.isjQueryObjDefined(q)&&q.offset().top>m.bottom&&(m.bottom=q.offset().top);
f=m}else"right"===n.location&&(f=a.offset(),f={left:f.left+a.outerWidth(),top:f.top,right:f.left+a.outerWidth()+400,bottom:f.top+400});n.minHeightElement&&(f.bottom=Math.max(f.bottom,f.top+b(n.minHeightElement).outerHeight()));f.bottom=Math.min(f.bottom,b(k).scrollTop()+b(k).height());f.left+=g[0];f.top+=g[1];f.right+=g[2];f.bottom+=g[3];f.width=f.right-f.left;f.height=f.bottom-f.top;n.enhancedHoverOverlay&&c.isDefined(k.pageXOffset)&&(m=b(k).width(),f.width=m-f.left+k.pageXOffset-18,f.height-=14);
p.css({left:f.left,top:f.top,width:f.width,height:f.height});l.rect=f;return l}function f(a){var b=new Image;l.detailSize=[0,0];b.onload=function(){l.detailSize=[b.width,b.height];z()};b.src=a.attr("src");if(0<b.width&&0<b.height)l.detailSize=[b.width,b.height];else if(n.detailImageSize)l.detailSize=n.detailImageSize;else{a=r(b.src);var c=D[2]/D[3];a.SS||a.AA?(a=a.SS||a.AA,l.detailSize=[a,a]):a.SX?l.detailSize=[a.SX,Math.round(a.SX/c)]:a.SY?l.detailSize=[Math.round(a.SY*c),a.SY]:a.SL&&(l.detailSize=
1<=c?[a.SL,Math.round(a.SL/c)]:[Math.round(a.SL*c),a.SL])}}var l=this,g=n.adjustment;b("#zoomWindow").remove();var m={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:n.zIndex};n.enhancedHoverOverlay&&(m.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",m.border="1px solid #949494",m.borderColor="rgb(148,148,148)");var p=b("<div id='zoomWindow' />").css(m);n.fadeMagnifier&&p.fadeIn(200);n.useClickZoom&&(q?p.css("cursor",'url("'+n.zoomOutIcon+'"), auto'):(p.css("cursor","-webkit-zoom-out"),
p.css("cursor","-moz-zoom-out"),p.css("cursor","zoom-out")));l.updateImage=function(a){a=b("<img id='detailImg' src='"+a+"'/>").css("position","absolute");l.detailImage&&l.detailImage.remove();p.append(a);b(document).trigger("updated.magnifier");l.detailImage=a;f(l.detailImage)};l.refit=function(){d();f(l.detailImage);return l};n.fadeMagnifier?(l.show=function(){p.fadeIn(200);return l},l.hide=function(){p.fadeOut(200);return l}):(l.show=function(){p.show();return l},l.hide=function(){p.hide();return l});
l.destroy=function(){p.remove();return l};l.getWindowSize=function(){return[l.rect.left,l.rect.top,l.rect.width,l.rect.height]};l.updateImage(ba);d();p.appendTo(document.body)},ea=!1,ra,ha=!1,ka;B.preload=function(a){a=b.makeArray(a);for(var c=a.length,d=0;d<c;d++)a[d]instanceof Array?B.preload(a[d]):"string"===typeof a[d]&&a[d]&&!N[a[d]]&&(N[a[d]]=new Image,N[a[d]].src=a[d])};B.changeImage=function(c,d){W&&x();ba=d;a.attr("src",c);B.preload(c);D=[a.position().left,a.position().top,a.width(),a.height()];
d&&("immediately"===n.preload?B.preload(d,!0):b(k).ready(function(){B.preload(d)}),H?H.updateImage(d):a.attr("data-old-hires",d))};B.destroy=function(){a.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");b(document).unbind("mousemove.magnifier");M&&M.destroy();M=null;H&&H.destroy();H=null};B.detailImage=function(){return H.detailImage};B.suppressMagnifier=function(a){V=a};B.isEngaged=function(){return W};B.engageMagnifier=y;B.disengageMagnifier=x;a[0].complete?A():
a.one("load",A);B.preload(a.attr("src"));if(n.preload){var ua=n.detailImageUrl,E=function(){B.preload(ua,!0);n.useClickZoom||na.preload()},X=n.preload;X.constructor!==Array&&(X=[X]);for(var fa=0;fa<X.length;fa++)if("immediately"===X[fa])E();else if(b(k)[X[fa]])b(k)[X[fa]](E);else b(k).bind(X[fa],E)}return B}function v(){if(u.useHoverZoom){var a={adjustment:[0,0,1,1],generalImageUrls:u.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:190,useHoverZoomIpad:u.useHoverZoomIpad,
useHoverZoom:u.useHoverZoom,useClickZoom:u.useClickZoom,fadeMagnifier:u.fadeMagnifier,zoomOutIcon:u.staticImages.zoomOutCur,enhancedHoverOverlay:u.enhancedHoverOverlay||u.atfEnhancedHoverOverlay};w&&(w.destroy(),w=n);var d=E.find(".image.item.selected img[data-old-hires]").not("[data-old-hires='']");c.isjQueryObjDefined(d)?u.useClickZoom?(d.one("click.loadmagnifier touchstart.loadmagnifier",function(b){w=new z(d,a);w.engageMagnifier(b,!0)}),q?d.css("cursor",'url("'+u.staticImages.zoomInCur+'"), auto'):
(d.css("cursor","-webkit-zoom-in"),d.css("cursor","-moz-zoom-in"),d.css("cursor","zoom-in"))):w=new z(d,a):f.isEnabled&&g.logHoverZoomApplicability(b,f)}}var x,u,A,B,w,E,q=navigator.userAgent.match(/msie|trident/i);return function(a,b,c,d){x=this;u=a;A=b;f.refToModel=A;B=d;x.render=function(a,b,c,d,f,e){E=c;w&&(w.destroy(),w=n)};x.update=function(a){};B.register("loadMagnifier",v);B.register("resize",v)}});g.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",
function(a,b,c,d){function f(a,b,e){a=(a=e?e:c.getColorFromState(b.getState().hovered_variations,n))&&""!==a?a:n.defaultColor;v.dispatch("updateView",{type:"swatchHover",data:{color:a}});d.postCountMetric("swatchHover")}function g(a,b,f,e){a=(a=e?e:c.getColorFromState(b.getState().selected_variations,n))&&""!==a?a:n.defaultColor;a===z.getCurrentItem().color?"function"===typeof f&&f():(v.dispatch("updateSelection",{type:"swatchClick",data:{color:a},onload:f}),d.postCountMetric("swatchClick"))}var k,
n,z,v;return function(b,c,d,e){k=this;n=b;z=c;v=e;a.on("image-block-twister-swatch-hover",f);a.on("image-block-twister-swatch-click",g);k.render=function(a,b,c,d,f){};k.update=function(a){}}});g.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric").register("ImageBlockVideoView",function(a,b,c,d,f,k){function n(a,c,f,h){!q.autoplayVideo||U||q.useChromelessVideoPlayer?!d.isjQueryObjDefined(a.find(".a-button-selected"))&&!d.productReelExperimentEnabled(q)&&(f=F.getCurrentItem(),
!h||q.prioritizeVideos||"chromeless-video"===f.type&&q.autoplayVideo)&&(h=d.getVideoHash(f.color,0,q),-1!==h&&(c+=0,J.dispatch("updateModel",{data:{index:0,thumbnailIndex:c,variant:h.variant,type:q.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),c=a.find(".item").get(c),d.selectGivenThumbnail(b(c),a))):(d.selectGivenThumbnail(a.find("img:last"),a),d.fadeToThumbnail(a.find("img").length-1,I,a))}function r(a){var b=F.getCurrentItem().color;if(q.useChildVideos&&!q.colorToVideo[b]){var c=
function(){if(a){q.colorToVideo[b]=a;var c={type:"updatedData",data:F.getCurrentItem()};J.dispatch("updateView",c)}};q.lazyLoadExperienceDisabled?c():g.when(d.rankedImagesReadyEvent(q.colorToAsin[b].asin)).execute(function(){c()})}}function z(a){if(!q.useChildVideos)return d.lazyLoadingRequired(F.getCurrentItem(),F,q)?void 0:q.videos;if(q.colorToVideo[a])return q.colorToVideo[a];var b=q.colorToAsin[a];if(b&&b.asin){var c={};c.params={asin:b.asin,productGroupID:q.productGroupID,useAiryVideoPlayer:!0,
useChromelessVideoPlayer:q.useChromelessVideoPlayer,isUDP:q.isUDP};q.isDPXFeatureEnabled||(c.success=function(a){r(a)},f.load("/gp/product/features/apparel-main-image/videos.html",c));return q.colorToVideo&&q.colorToVideo[a]}}function v(){J.dispatch("selectThumbnail",d.productReelExperimentEnabled(q)?1:0)}function x(a,f,g,m){return c.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:a[0],streamingUrls:f.url,swfUrl:g.swfUrl,foresterMetadataParams:g.foresterMetadataParams,backgroundColor:"transparent",
flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var b=d.isjQueryObjDefined(a.find("video"))?"HTML5":"FLASH";k.postCountMetric("dppc_chromelessVideo:"+b)},playing:function(){a.parent().css("z-index",8)},videounsupported:function(){v();k.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){v();k.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){O.seek(0)}},cuePoints:[{values:f.durationSeconds-1,type:"position",
callback:function(c,d,f){c=f.durationSeconds-f.playheadTimeSeconds;a.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*c,.1,function(){a.parent().css({"background-color":"transparent","z-index":-1});v();b(this).show().css("opacity",1)})}}]})}function u(c){if("chromeful-video"===c.type||"chromeless-video"===c.type){var f=d.getVideoHash(c.color,c.index,q);if(-1===f)return-1;if("chromeful-video"===c.type){c=I.width()/I.height();var h=parseInt(f.videoWidth,10),g=parseInt(f.videoHeight,
10);d.updateAspectRatio(c,h,g,P);O?(O.show(),d.loadMediaIntoAiry(O,f,R)):O=d.createAiryInstanceForChromeful(P,f,R,null,q.autoplayVideo,I,L,G);b:if(d.productReelExperimentEnabled(q)){if(1<d.getVideosCount(F.getCurrentItem().color,q)){if(d.isDefined(y)){L.show();break b}y=b('<a class="more-videos"></a>').attr("href","#").text(q.staticStrings.watchMoreVideos);L.find("#videoCaption").append(y);a.declarative.create(y,"videoIngressClick",Q)}d.playVideoInImmersiveView(q,F.getCurrentItem().color)&&(a.declarative.create(P,
"videoIngressClick",Q),P.children().css("z-index","-1"),P.css("display","inline-block"))}else L.find("#videoCaption").text(q.staticStrings.playVideo),L.show();f=O;q.autoplayVideo&&f&&!U&&(d.toggleVideoCaption(L),f.setVolume(0),f.show(),f.play(),U=!0)}else O?(O.show(),d.loadMediaIntoAiry(O,f,R),O.play(),L.show()):(O=x(P,f,R))&&O.play()}}function A(a,c,f){var h=z(c);c=a;d.isDefined(h)&&0<h.length&&q.alwaysIncludeVideo&&a===q.maxAlts&&(G.find(".item:last").remove(),a--);d.isDefined(h)&&(b.each(h,function(b,
c){if(a<q.maxAlts){var f=q.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",e={type:f,index:b,thumbnailIndex:a,variant:c.variant};Q={type:"video-ingress",index:b,thumbnailIndex:a,variant:c.variant};d.productReelExperimentEnabled(q)&&("chromeful-video"===f&&(D+=" videoBlockIngress",d.productReelDarkIngressEnabled(q)&&(D+=" videoBlockDarkIngress",c.thumb=c.thumb.replace("_PKmb-play-button-overlay-thumb",""))),q.altsOnLeft||(D+=" a-align-top"));d.createThumbnail(e,c.thumb,G,D);if(d.productReelExperimentEnabled(q)){B(G.find(".videoBlockIngress img"),
q.videoIngressATFSlateThumbURL);var e=1<h.length?"multiple-videos":"one-video",g=1<h.length?h.length+" "+q.staticStrings.multipleVideos:q.staticStrings.singleVideo;g&&G.find(".videoBlockIngress").append(G.find("#videoCount_template").clone().text(g).attr("id","videoCount")).addClass(e)}M||(M=!0,k.postCountMetric("chromeless-video"===f?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));a++}if(d.productReelExperimentEnabled(q))return!1}),n(G,c,a,f));return a}function B(a,b){var c=a.attr("src");
if(c&&b){a.attr("src",b);var d=new Image;d.onload=function(b){a.attr("src",c)};d.src=c}}function w(a){O&&O.pause();a.data=Q;a.clickTimeStamp=a.$event.timeStamp;var b="a"===a.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";J.dispatch("imageClick",a);k.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp);k.postCountMetric(b)}var E,q,F,J,G,P,L,I,y,O,R,Q,H,M=!1,U=!1,D="videoThumbnail";return function(c,f,h,g){E=this;q=c;F=f;J=g;R=q.airyConfig;q.colorToVideo={};q.colorToVideo[q.landingAsinColor]=
q.colorToVideo[q.defaultColor]=q.videos;E.render=function(c,f,h,g,m,k){G=g;P=m.find("#main-video-container");L=P.parent().find("#video-canvas-caption");I=b("#main-image-container");q.useChromelessVideoPlayer||P.addClass("chromeful-container");H=A(f,c,k);u(F.getCurrentItem());d.productReelExperimentEnabled(q)&&a.declarative("videoIngressClick",["click"],w);return H};E.update=function(a){var b=a.data;"ingress"!==b.type&&O&&(O.hide(),P.parent().css("z-index",-1),L.hide());if("swatchHover"===a.type)b.color===
F.getCurrentItem().color?u(F.getCurrentItem()):a.captured||d.lazyLoadingRequired(b,F,q)&&!d.lazyLoadOnHoverEnabled(q)&&u(F.getCurrentItem());else if("chromeful-video"===b.type||"chromeless-video"===b.type)"mouseenter"===a.type&&k.postCountMetric("dpcc_videoThumbHovered_"+(b.thumbnailIndex+1)+"_"+H),u(b),q.usePeekHover&&"click"!==a.type||(d.selectGivenThumbnail(a.$declarativeParent,G),"click"===a.type&&d.productReelDarkIngressEnabled(q)&&(k.postCountMetric("dpcc_videoThumbClicked_"+(b.thumbnailIndex+
1)+"_"+H),Q.action="videoIngressClick",Q.clickTimeStamp=a.$event.timeStamp,J.dispatch("videoIngressClick",Q),k.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp)))};if(q.isDPXFeatureEnabled)a.on("triggerVideoAjax",r)}});g.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(a,b,c,d,f,g,C,r,z,v){function x(a){return a.hiRes||
a.large||a.main[a.main.length-1]}function u(){t.find("#ivTitle").click(function(){ca.hide()})}function A(a){if(f.productReelExperimentEnabled(S)){var b=t.find("#ivMediaSelect");b.find("option[value='"+a+"']").attr("selected",!0);b.trigger("change")}}function B(){Y=Ya?{type:"360-spin"}:oa.getCurrentItem()}function w(){var a=t.find("#ivStage"),b=ca.$container.find(".a-popover-wrapper"),c=b.find(".a-popover-inner"),b=b.height()-v.getDimension(c,"padding-top")-v.getDimension(c,"padding-bottom");t.css("height",
b);var c=t.find("#ivTitle").outerHeight(!0),d=t.find("#ivVariationSelection").outerHeight(!0),f=t.find("#ivMediaSelection").outerHeight(!0),e=t.find("#ivThumbs"),h=v.getDimension(e,"margin-top")+v.getDimension(e,"margin-bottom");e.css("height",b-c-d-f-h);t.find("#ivLargeImage").css("height",b);a.css("width",t.width()-v.getDimension(t,"padding-left")-v.getDimension(t,"padding-right")-t.find("#ivThumbColumn").width()-v.getDimension(a,"margin-left")-v.getDimension(a,"margin-right"))}function E(){t.find("#ivMediaSelect").change(function(){var a=
d(this).val();"all"===a?(t.find("#ivVideoList").hide(),t.find("#ivThumbs").show(),t.find(".ivThumbVideo").show(),"chromeful-video"===Y.type&&t.find("#ivVideo_"+Y.index).click()):"images"===a?(t.find("#ivVideoList").hide(),t.find("#ivThumbs").show(),t.find(".ivThumbVideo").hide(),"chromeful-video"===Y.type&&(0===la&&0===da?t.find("#iv360").click():0===la?t.find("#ivHeroImage_0").click():t.find("#ivImage_0").click())):"videos"===a&&(t.find("#ivVideoList").show(),t.find("#ivThumbs").hide(),"chromeful-video"!==
Y.type?t.find("#ivVideoList_0").click():t.find("#ivVideoList_"+Y.index).click())})}function q(){var a=t.find("#ivStage").find("#ivLargeImage"),b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var f=d.width(),e=d.height();0<d.length&&(d[0].naturalWidth&&(f=d[0].naturalWidth),d[0].naturalHeight&&(e=d[0].naturalHeight));a.css("cursor","auto");var f=0===f?1:f,e=0===e?1:e,h=Math.min(b/f,c/e),l=e*h,g=f*h;1>h?(cb?a.css("cursor","url('"+S.staticImages.zoomIn+"'), auto"):(a.css("cursor",
"-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),Va=!0):Va=!1;f=Math.min(g,f);e=Math.min(l-20,e);d.css({"margin-top":(c-e)/2,"margin-left":(b-f)/2,height:e,width:f});a.css("visibility","visible");Ga=!1}function F(a){var b=t.find("#ivLargeImage");b.css("visibility","hidden");b.empty();v.animateStageIn(b);b.append(a);q()}function J(){ja&&ja.pause();t.find("#ivLarge360").css("display","none");t.find("#ivLargeVideo").css("display","none");t.find("#ivLargeImage").css("display",
"none");R()}function G(a){J();t.find("#ivLargeImage").css("display","block");var b;"hero-image"===a?f.isDefined(qa)&&(b=x(qa[Y.index])):f.isDefined(wa)&&(b=x(wa[Y.index]));if(f.isDefined(b)){t.find(".fullscreen").remove();var c=d("<img>").attr("src",b).addClass("fullscreen"),e=t.find("#ivLargeImage");v.animateStageOut(e,function(){c.load(function(){F(c)});if(c[0].complete)F(c);else{e.empty();var a=(e.height()-104)/2,b=(e.width()-80)/2;d("<img>").attr("src",S.staticImages.spinner).css({position:"relative",
top:a+"px",left:b+"px"}).appendTo(e)}})}}function P(){var a=parseInt(Y.index,10)+1;a>=K.length||t.find("#ivVideo_"+a).click()}function L(){var a;f.isDefined(K)&&(a=K[Y.index]);if(f.isDefined(a)){J();var b=t.find("#ivLargeVideo").css("display","block");ja?(ja.isDetached()&&ja.attach(b[0]),f.loadMediaIntoAiry(ja,a,ta),ja.show()):(ja=f.createAiryInstanceForChromeful(b,a,ta,"ImmersiveView"),ta.enableContinuousPlay&&ja.bind("ended",P));ja.play({isAsync:!0})}}function I(){B();var a;"hero-image"===Y.type?
a=t.find("#ivHeroImage_"+Y.index):"image"===Y.type?(a=t.find("#ivImage_"+Y.index),A("all")):"chromeful-video"===Y.type||"chromeless-video"===Y.type?(a=t.find("#ivVideo_"+Y.index),A("videos")):a="360-spin"===Y.type?t.find("#iv360"):f.isDefined(qa)?t.find("#ivHeroImage_"+Y.index):t.find("#ivImage_"+Y.index);f.isjQueryObjDefined(a)||(a=t.find("#ivImage_0"));y(a)}function y(a){t.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(Y.type="chromeful-video",Y.index=
a.attr("id").split("_")[1],L()):a.hasClass("ivHeroImage")?(Y.type="hero-image",Y.index=a.attr("id").split("_")[1],G(Y.type)):a.hasClass("iv360Image")?(Y.type="360-spin",Y.index=0,O()):(Y.type="image",Y.index=a.attr("id").split("_")[1],G(Y.type))}function O(){J();t.find("#ivLarge360").css("display","block");D();var a=t.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});v.animateStageIn(a)},200);H();C.postCountMetric("dppc_click360");za=Date.now()}function R(){0<za&&(Q("dppc_duration360",
Date.now()-za),za=0)}function Q(a,b){k.ue&&k.ue.count(a,b)}function H(){if(0<ma){var a=t.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function M(a,b){if(ma<a.length){var c=d("<img />").css({display:"block",width:6*Ca+"px",height:Da+"px"});c.hide();b.append(c);c.get(0).onload=function(){b.closest(document.documentElement).length&&(ma++,1===ma&&(H(),0<za&&Q("dppc_loadTime360",Date.now()-za)),0<Ua&&Q("dppc_perSpriteloadTime360",Date.now()-Ua),t.find("#iv360Spinner").hide(),
c.show(),Ia=5*ga.imageLocations[Math.floor(Ka/ga.imageLocations[0].length)][Ka%ga.imageLocations[0].length],M(a,b))};c.attr("src",a[ma].replace(/(\._SP)\d+(,)\d+/,"$1"+Ba+"$2"+Ja));Ua=Date.now()}}function U(a){if(f.isDefined(ga.spriteWidthSizes)&&0<ga.spriteWidthSizes.length){var b=ga.spriteWidthSizes,c=b.length,d=b[0],e=b[c-1];if(a<=d)return d;if(a>e)return e;for(d=0;d<c;d++)if(a>b[d]&&a<=b[d+1])return b[d+1]}else return a}function D(){var a=t.find("#ivLarge360");a.children("#image-360-sprites").length||
(a.append("<div id='image-360-sprites'></div>"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),d("<img>").attr("src",S.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),Fa=!0,T())}function T(){if(f.isDefined(ga.spriteURLs)&&
f.isDefined(t)&&Fa&&!xa){var a=t.find("#ivLarge360"),b=d("<div>").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});f.isDefined(ga.staticImages.hint360)&&d("<img>").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",ga.staticImages.hint360).appendTo(b);d("<div>").css({"text-align":"center"}).text(S.staticStrings.dragToSpin).appendTo(b);b.appendTo(a);var b=ga.imageWidth,c=ga.imageHeight,e=a.parent().width(),h=a.parent().height(),
g=0,k=0;b/c>e/h?(Ba=U(e),Ja=Math.round(c/b*Ba),Ca=Math.ceil(e),Da=Math.ceil(Ja/Ba*e),k=(h-Da)/2):(Ja=U(h),Ba=Math.round(b/c*Ja),Da=Math.ceil(h),Ca=Math.ceil(Ba/Ja*h),g=(e-Ca)/2);a.css({"margin-left":g,"margin-top":k,width:Ca+"px",height:Da+"px",overflow:"hidden",position:"relative"});a.children("#image-360-sprites").css("width",6*Ca+"px");M(ga.spriteURLs,t.find("#image-360-sprites"),0);b=t.find("#ivLarge360");b.bind("mousedown",ba);b.bind("touchstart",N);b.bind("touchmove",W);b.bind("touchend",V);
d(document).bind("mousemove",Z);d(document).bind("mouseup",aa);f.isDefined(S.staticImages.grab)&&a.css("cursor","url('"+S.staticImages.grab+"'), auto");xa=!0}}function N(a){Pa=!0;Ea=a.originalEvent.targetTouches[0].clientX}function W(a){Pa&&(ia(a.originalEvent.targetTouches[0].clientX-Ea),Ea=a.originalEvent.targetTouches[0].clientX)}function V(a){Pa&&(Pa=!1)}function ba(a){Ta=!0;Qa=a.originalEvent.clientX;f.isDefined(S.staticImages.grabbing)&&(a=t.find("#ivLarge360"),a.css("cursor","url('"+S.staticImages.grabbing+
"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+S.staticImages.grabbing+"'), auto"));return!1}function Z(a){Ta&&(ia(a.originalEvent.clientX-Qa),Qa=a.originalEvent.clientX)}function aa(a){Ta&&(Ta=!1,f.isDefined(S.staticImages.grab)&&(a=t.find("#ivLarge360"),a.css("cursor","url('"+S.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function ia(a){for(a=Ia-=a/Ca*180;0>a;)a+=360;for(;360<a;)a-=360;Ia=a;var b;a=360;for(var c=0;c<ma;c++)for(var d=
0;d<ga.imageLocations[c].length;d++){var e=Math.abs(Ia-5*ga.imageLocations[c][d]);e<a&&(a=e,b=c*ga.imageLocations[0].length+d)}b!==Ka&&(a=Math.floor(b/ga.imageLocations[0].length),a!==Math.floor(Ka/ga.imageLocations[0].length)&&(f.isDefined(Wa)||(Wa=document.createElement("canvas").getContext("2d")),c=t.find("#image-360-sprites").children(),Wa.drawImage(c[a],0,0)),a=t.find(".iv360Hint").not(".iv360HintFaded"),f.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));Ka=b;a=b%ga.imageLocations[0].length*
-1*Ca;b=-1*Math.floor(b/ga.imageLocations[0].length)*Da;c=t.find("#ivLarge360").children("#image-360-sprites");c.css("-webkit-transform","translate3d("+a+"px, "+b+"px, 0)");c.css("transform","translate3d("+a+"px, "+b+"px, 0)")}function na(){t.delegate(".ivThumb","click",function(){var a=d(this);y(a)});t.delegate(".ivThumbVideoListOuter","click",function(){t.find(".ivThumbVideoListOuter").removeClass("selected");var a=d(this);a.addClass("selected");Y.type="chromeful-video";Y.index=a.attr("id").split("_")[1];
L()})}function sa(){ja&&!ja.isDetached()&&(ta.volume=ja.getVolume(),ja.detach(),!document.all||k.atob||document.addEventListener||(ja=null));t.find("#ivLargeImage").empty();R()}function ea(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function ra(a){var b=ya.top-(a.pageY-La[1])*Ma;a=ea(ya.left-(a.pageX-La[0])*Ma,Oa.left);b=ea(b,Oa.top);t.find(".fullscreen").css({left:a,top:b})}function ha(){t.delegate("#ivLargeImage","click",function(a){if(Ga)q();else if(Va){t.find(".fullscreen").removeAttr("style");
if(Va){var b=t.find("#ivLargeImage"),c=b.find(".fullscreen");cb?b.css("cursor","url('"+S.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));Ga=!0;var d=t.find("#ivLargeImage");Oa.left=d.width()-c.width();Oa.top=d.height()-c.height();var d=b.height()/2,f=b.width()/2;La=[b.offset().left+f,b.offset().top+d];ya.top=d-c.height()/2;ya.left=f-c.width()/2;c.css({position:"relative",left:ya.left,top:ya.top});Ma=Math.max(c.height()/
b.height(),c.width()/b.width())}ra(a)}});t.delegate("#ivLargeImage","mousemove",function(a){Ga&&ra(a)})}function ka(c){if(f.isImmersiveViewEnabled(S,oa.getCurrentItem().color)){Ya=f.isDefined(c)&&"button-360-click"===c.action;r.isEnabled&&z.logImmersiveViewRequestServed(r);C.postCountMetric("dppc_immersiveViewOpened");if(f.isDefined(ca))ca.show();else{c=d("#auiImmersiveViewDiv");var h=d(k).height()-150,g=d(k).width()-75;ca=b.create(c,{name:"immersiveView",activate:"onclick",width:g,height:h,popoverLabel:"ImmersiveView",
hideHeader:!0});c.click()}if(Xa){t=d("#ivMain");c=oa.getCurrentItem().color;wa=S.colorImages[c];qa=S.heroImage[c];K=S.useChildVideos?S.colorToVideo[c]:S.videos;Sa=X()&&S.spin360ColorEnabled[c];ga=X()?S.spin360ColorData[c]:n;B();va=da=Ha=la=0;f.isDefined(qa)&&(da=qa.length);f.isDefined(wa)&&(la=wa.length);f.isDefined(K)&&(Ha=K.length);Sa&&(va=1);v.populateTitle(t.find("#ivTitle"),45,S);v.populateVariationSelection(t.find("#ivVariationSelection"));c=t.find("#ivMediaSelect");0===la+va||0===Ha?(c.parent().hide(),
t.find("#ivThumbs").addClass("noMediaSelection")):(c.empty(),d("<option/>").attr("value","all").prop("selected",!0).text(S.staticStrings.allMedia+" ("+(da+la+va+Ha)+")").appendTo(c),d("<option/>").attr("value","images").text(S.staticStrings.images+" ("+(da+la+va)+")").appendTo(c),d("<option/>").attr("value","videos").text(S.staticStrings.videos+" ("+Ha+")").appendTo(c),c.parent().show(),c.val("all"));c=t.find("#ivThumbs");c.find(".ivRow").not(".placeholder").remove();for(var h=da+la+Ha+va,p=g=0;g<
h;)for(var q=c.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(c),u=0;3>u&&g<h;u++,g++,p++)if(p<da){var w=qa[g].thumb,y=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+g).appendTo(q);y.find(".ivThumbImage").css("background",'url("'+v.getResizedThumbnailURL(w)+'") center no-repeat')}else if(p>=da&&p<la+da)w=wa[g-da].thumb,y=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+
(g-da)).appendTo(q),y.find(".ivThumbImage").css("background",'url("'+v.getResizedThumbnailURL(w)+'") center no-repeat');else if(p>=da+la&&p<la+da+va)y=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(q),y.find(".ivThumbImage").css("background",'url("'+(f.isDefined(S.staticImages.icon360)?v.getResizedThumbnailURL(S.staticImages.icon360,!0):"")+'") center no-repeat');else if(w=K[g-la-da-va],y=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id",
"ivVideo_"+(g-la-da-va)).appendTo(q),y.find(".ivThumbImage").css("background",'url("'+w.thumbUrl+'") center no-repeat'),f.isDefined(w)){var x={position:"triggerTop"},A=t.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");A.find(".ivVideoPopoverTitle").text(w.title);A.find(".ivVideoPopoverDuration").text(w.durationTimestamp);x.inlineContent=A[0];a.declarative.create(y,"a-tooltip",x)}c=t.find("#ivVideoList");c.find(".ivThumbVideoListOuter").not(".placeholder").remove();
h=c.find(".placeholder");for(g=0;g<Ha;g++)p=K[g],q=h.clone().removeClass("placeholder").appendTo(c),q.attr("id","ivVideoList_"+g),q.find(".ivThumbImage").css("background",'url("'+p.thumbUrl+'") center no-repeat'),q.find(".ivThumbTitle").text(p.title),q.find(".ivThumbDuration").text(p.durationTimestamp);t.find("#ivLarge360").empty();ma=0;xa=Fa=!1;ta=S.airyConfig;Xa=!1;hb()}}}function ua(a){var b=S.colorToAsin[a],c={},d=500;if(b&&b.asin){c.params={asin:b.asin};var e="360"+b.asin,h=Date.now();c.success=
function(b){Q("dppc_asyncRequestTime360",Date.now()-h);b&&f.isDefined(b.spin360.spin360Model)?(f.ajaxState(e,"success"),S.spin360ColorData[a]=b.spin360.spin360Model,a===oa.getCurrentItem().color&&(ga=S.spin360ColorData[a],T())):c.error()};c.error=function(){C.postCountMetric("dppc_asyncFailed360");Q("dppc_asyncRequestTime360",Date.now()-h);d*=2;16E3>=d?setTimeout(function(){h=Date.now();g.load("/gp/product/features/apparel-main-image/360.html",c)},d):f.ajaxState(e,"fail")};f.ajaxState(e)&&"fail"!==
f.ajaxState(e)||(g.load("/gp/product/features/apparel-main-image/360.html",c),f.ajaxState(e,"sent"))}}function X(){return f.isDefined(S.spin360ConfigEnabled)&&S.spin360ConfigEnabled}var fa,S,oa,pa,ca,t,qa,wa,K,da,la,Ha,va,Y,ja,ta,ga,Sa,Ca,Da,Ja,Ba,Qa,Ea,Ya=!1,Fa=!1,xa=!1,Ia=0,Ka=0,za=0,Ua=0,Ta=!1,Pa=!1,ma=0,Wa,cb=navigator.userAgent.match(/msie|trident/i),Xa=!0,Ga=!1,Va=!1,Oa={},ya={},Ma,La,hb=a.once(function(){E();na();ha();a.on("a:popover:afterUpdatePosition:immersiveView",w);a.on("a:popover:afterShow:immersiveView",
I);a.on("a:popover:afterHide:immersiveView",sa);u()});return function(b,c,e,h){fa=this;S=b;oa=c;r.refToModel=oa;pa=h;X()&&(S.spin360ColorData[S.landingAsinColor]=S.spin360ColorData[S.defaultColor],S.spin360ColorEnabled[S.landingAsinColor]=S.spin360ColorEnabled[S.defaultColor]);f.isDefined(S.staticImages.icon360)&&d("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",v.addStyleCodeToURL(S.staticImages.icon360,"_FMpng_RI_"));fa.render=function(b,c,d,e,h,l){Xa=!0;X()&&S.spin360ColorEnabled[b]&&
!f.isDefined(S.spin360ColorData[b])&&(S.spin360ColorData[b]={},ua(b));f.isImmersiveViewEnabled(S,oa.getCurrentItem().color)&&X()&&S.spin360ColorEnabled[b]&&(c===S.maxAlts&&(b=e.find(".item.imageThumbnail"),d=e.find(".item.videoThumbnail"),f.isDefined(d)&&1<d.length?d.last().remove():b.last().remove(),c--),b=e.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),a.declarative.create(b,"button-360-click"),e.append(b),c++,C.postCountMetric("dppc_display360"));
return c};fa.update=function(a){};pa.register("imageClick",ka);pa.register("button360Click",ka)}});g.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(a,b,c,d,f,g,n,r,z,v){function x(){var b=E.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),c=b.find(".a-popover-inner"),b=b.height()-v.getDimension(c,
"padding-top")-v.getDimension(c,"padding-bottom");d("#iv-tab-view-container").css("height",b);J=d("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==d(this).css("display")}).length;1<J?(d("#iv-tab-view-container ul.iv-tab-views li").parent().show(),c=d("#iv-tab-view-container ul.iv-tab-views li").parent().height(),b-=c):d("#iv-tab-view-container ul.iv-tab-views li").parent().hide();d("#iv-tab-view-container .iv-tab-content").css("height",b);a.trigger("dp:image-block:immersive-view:resize")}
function u(){a.trigger("dp:image-block:immersive-view:reset")}function A(c){if(f.isImmersiveViewEnabled(w,E.getCurrentItem().color)){r.isEnabled&&z.logImmersiveViewRequestServed(r);n.postCountMetric("dppc_immersiveViewOpened");f.isDefined(c)&&("button-360-click"===c.action?d("#iv360TabHeading").click():"videoIngressClick"===c.action?(G=c.clickTimeStamp,d("#ivVideosTabHeading").click()):d("#ivImagesTabHeading").click());var h=E.getImmersiveViewModalInstance();if(f.isDefined(h))h.show();else{c=d("#auiImmersiveViewDiv");
var h=Math.min(Math.max(d(k).height()-150,540),1080),g=Math.min(Math.max(d(k).width()-75,990),1980),h=b.create(c,{name:"immersiveView",activate:"onclick",width:g,height:h,popoverLabel:"ImmersiveView",hideHeader:!0});E.setImmersiveViewModalInstance(h);c.click()}F&&(F=!1,P(),a.trigger("dp:image-block:immersive-view:init"))}}var B,w,E,q,F=!0,J=0,G,P=a.once(function(){a.on("a:popover:afterUpdatePosition:immersiveView",x);a.on("a:popover:afterShow:immersiveView",x);a.on("a:popover:afterHide:immersiveView",
u)}),L=a.once(function(){var b=d("#iv-tab-view-container ul.iv-tab-views li");b.bind("click",function(c){var f=b.filter(".iv-active");f.attr("id")!==d(this).attr("id")&&a.trigger("dp:ivTabs:"+f.find("a").attr("data-iv-tab-view")+":deselect",c);b.removeClass("iv-active");d(this).addClass("iv-active");d("#iv-tab-view-container .iv-tab-content").hide();f=d(this).find("a").attr("data-iv-tab-view");d("#"+f).show();"ivVideosTab"===f&&(c.clickTimeStamp=G||c.timeStamp);a.trigger("dp:ivTabs:"+f+":select",
c);n.postCountMetric("dppc_"+f);return!1})});return function(a,b,c,d){B=this;w=a;E=b;r.refToModel=E;q=d;B.render=function(a,b,c,d,f,e){n.postCountMetric("dpcc_altThumbs_"+b);F=!0};B.update=function(a){};B.getTitle=function(){};B.getVariationSelectionInfo=function(){};L();q.register("imageClick",A);q.register("button360Click",A);f.productReelDarkIngressEnabled(w)&&q.register("videoIngressClick",A)}});g.when("A","jQuery","imageBlockUtils").register("ImageBlockLoader",function(a,b,c){return{load:function(b,
c){c=c||{};c.timeout=c.timeout||4E3;a.ajax(b,c)}}});g.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric").register("imageBlockUtils",function(a,b,c,d,f,g,n,r){function z(a){return null!==a&&"undefined"!==typeof a}function v(a){var c=0;b.each(a,function(a,b){var d=parseInt(b[1],10);d>c&&(c=d)});return c}function x(a){var c=0;b.each(a,function(a,b){var d=parseInt(b[0],10);d>c&&(c=d)});return c}function u(a,b,c){b=b.width();
if(c.naturalMainImageSize)return b;a=v(a);0<a&&(b=Math.min(b,a));return b}function A(a,b,c){b=b.height();if(c.naturalMainImageSize)return b;a=x(a);0<a&&(b=Math.min(b,a));return b}function B(a){var c;b.each(a,function(a,b){z(c)||(c=b[1]/b[0])});return c||1}function w(a,b,c){b.fadeTo(500,0,function(){q(a,c);b.fadeTo(500,1)})}function E(a){a&&a.toggle()}function q(a,c){var d=c.find("img");z(d[a])&&b(d[a]).click()}function F(a,b){Q[a]=b?b:Q[a];return Q[a]}function J(a,c,d){d=d||R;d=d.colorImages;if(1>
d.length||!z(d[a])||!z(c))return-1;var f=-1;b.each(d[a],function(a,b){b.variant===c&&(f=a)});return f}function G(a,c,d){d=d||R;d=d.colorImages;return!(z(d)&&z(d[a])&&z(d[a][c])&&z(d[a][c].main))||1>b.map(d[a][c].main,function(a,b){return b}).length?-1:d[a][c]}function P(a,b,c,d){d.parent().css("z-index",2);0!==c&&0!==b&&(b/=c,a>b?d.css("width",b/a*100+"%"):d.css("height",a/b*100+"%"))}function L(a){return a.tabbedImmersiveViewTreatment&&"C"!==a.tabbedImmersiveViewTreatment}function I(a,c){var d;if(d=
a.useIV)d=a.colorImages&&a.colorImages[c]&&0<a.colorImages[c].length?!0:!1;n.isEnabled&&(n.IVApplicaple=d,r.logImmersiveViewApplicability(b,n));return d}var y,O,R=b.extend(!0,{},f,g),Q={};return{isDefined:z,isUndefinedOrEmpty:function(a){return z(a)?"object"===typeof a&&0===Object.keys(a).length:!0},isDefinedAndNotEmpty:function(a){return z(a)?"object"===typeof a&&0<Object.keys(a).length:!1},isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:B,getMaxHeightOfMainImage:A,getMaxWidthOfMainImage:u,
getMaxDimensionsOfMainImage:function(a,b,c){var d=A(a,b,c);b=u(a,b,c);a=B(a);c=b/a;b=Math.min(b,d*a);d=Math.min(d,c);return[d,b]},getContainerHeight:function(a,b,c){var d=a.get(0);a=0;if(z(d)){a=d.offsetWidth/b;a=Math.min(a,c);var f;b=R.mainImageHeightPartitions;c=R.mainImageMaxSizes;if(z(c)&&z(b)){for(var e=0,h=k.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=0;d<b.length;d++)h>b[d]&&(e=d+1);c.length>=e&&(f=c[e])}z(f)&&(a=Math.min(f[1],a))}return a},getColorFromState:function(a,
c){if(a){c=c||R;var d="";b.each(c.visualDimensions,function(b,c){a[c]&&(d+=" "+a[c])});return d&&d.substring(1)}},createThumbnail:function(b,c,d,f){var e=d.find(".template").clone().removeClass("template").addClass("item"),h=document.createElement("img");h.src=c;e.find(".placeHolder").replaceWith(h);(c=b.heroVideoVariant)&&"hero-image"===b.type&&b.variant===c&&e.addClass("heroImageThumbnail");z(f)&&e.addClass(f);a.declarative.create(e,"thumb-action",b);d.append(e)},selectGivenThumbnail:function(a,
b){var c=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");c.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(a,f,g,m,k,p,n,r){var C=b.extend({},g.foresterMetadataParams);null!==m&&(C.method+="."+m);var z=[];f.disabledViewIds&&(z=f.disabledViewIds);return c.embed({parentElement:a[0],streamingUrls:f.url,contentId:f.mediaObjectId,contentMinAge:Number(f.minimumAge||"")||0,contentTitle:f.title,swfUrl:g.swfUrl,
foresterMetadataParams:C,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:f.slateUrl,postMediaSlate:f.slateUrl},videoAds:g.videoAds,bindings:{play:function(){"ImmersiveView"===m?y||(y=!0,d.postCountMetric("dppc_chromefulVideoPlayedIV")):O||(O=!0,d.postCountMetric("dppc_chromefulVideoPlayedPV"))}},cuePoints:[{values:f.durationSeconds-1,type:"position",callback:function(a,b,c){k&&(w(0,p,r),E(n))}}],disabledViewIds:z})},loadMediaIntoAiry:function(a,b,c){a&&a.getMediaSourceInfo()!==
b.url&&a.loadMedia({mediaSourceInfo:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}})},showUnavailable:function(a){a&&(b("#imageBlock .unvailableVariation").html(a),b("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){b("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:w,toggleVideoCaption:E,selectThumbnail:q,spinner:function(a,c){var d=b("#imageBlock .a-spinner").parent();
0===d.length&&(d=b("<div></div>").append(b("<span></span>").addClass("a-spinner").addClass("a-spinner-medium")),a.append(d),d.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));c?d.show():d.hide();return d},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+
a},ajaxState:F,getIndexForVariant:J,getImageHash:G,lazyLoadingRequired:function(a,b,c){b=Math.max(J(a.color,b.getCurrentItem().variant,c),0);b=-1!==G(a.color,b,c);a=c.colorToAsin[a.color]&&c.colorToAsin[a.color].asin;a=!a||"success"!==F(a);return!c.lazyLoadExperienceDisabled&&!b&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:P,repositionVideoBanner:function(a,b,c,d){setTimeout(function(){var c=a.width()/a.height();P(c,16,9,b)},d||0)},productReelExperimentEnabled:L,
productReelDarkIngressEnabled:function(a){return L(a)&&"T2"===a.tabbedImmersiveViewTreatment},getVideosCount:function(a,b){return b.useChildVideos&&b.colorToVideo[a]?b.colorToVideo[a].length:b.videos?b.videos.length:0},getVideoHash:function(a,b,c){if(c.useChildVideos){if(!z(c.colorToVideo))return-1;a=c.colorToVideo[a]}else a=c.videos;return z(a)&&z(a[b])&&z(a[b].url)?a[b]:-1},isImmersiveViewEnabled:I,playVideoInImmersiveView:function(a,b){return I(a,b)&&L(a)}}});g.when("A","jQuery","imageBlockUtils",
"ImageBlockHeroUtils","postMetric").register("ImageBlockHeroImageView",function(a,b,c,d,f){function g(a,f,m,k){if(!c.isjQueryObjDefined(a.find(".a-button-selected"))){var p=E.getCurrentItem();if(!k||"chromeless-video"!==p.type||!w.autoplayVideo){k=0;if("hero-image"===p.type){k=n(p.color,p.variant);if(-1===k)return;k=-1!==k?k:0}var C=f+k;C>=m&&(k=0,C=f);f=d.getHeroImageHash(w,p.color,k);-1!==f&&(q.dispatch("updateModel",{data:{index:k,thumbnailIndex:C,variant:f.variant,type:"hero-image"}}),f=a.find(".item").get(C),
c.selectGivenThumbnail(b(f),a))}}}function k(a,d,f){if("hero-video"===E.getCurrentItem().type)return a;d=w.heroImage&&w.heroImage[d];var l=a;c.isDefined(d)&&(b.each(d,function(b,d){a<w.maxAlts&&(c.createThumbnail({type:"hero-image",index:b,thumbnailIndex:a,variant:d.variant},d.thumb,F,"imageThumbnail"),a++)}),g(F,l,a,f));return a}function n(a,d){var f=w.heroImage;if(1>f.length||!c.isDefined(f[a])||!c.isDefined(d))return-1;var l=-1;b.each(f[a],function(a,b){b.variant===d&&(l=a)});return l}function z(){if(J.length&&
w.repositionHeroImage){var a=d.getHeroDimParams(w,E.getCurrentItem()),b;c.isDefined(a)&&(b=c.isDefined(a.xPos)?a.xPos+"px "+a.yPos+"px ":"center "+a.yPos+"px ",J.css({"background-position":b,"background-size":a.width+"px "+a.height+"px ","max-width":a.width+"px ","min-height":a.height+"px ",filter:"","-ms-filter":""}))}}function v(a,b,f,e){if(J.length&&a&&b){if("function"===typeof f||e){var g=new Image;g.onload=e?function(){J.css("background-image",'url("'+a+'")')}:f;g.src=a}f=b[1];var g=b[0],m;e||
J.css({"background-image":'url("'+a+'")'});w.repositionHeroImage&&(b=d.getHeroDimParams(w,E.getCurrentItem(),b),c.isDefined(b)&&(f=b.width,g=b.height,m=c.isDefined(b.xPos)?b.xPos+"px "+b.yPos+"px ":"center "+b.yPos+"px "));J.css({"background-position":m,"background-size":f+"px "+g+"px ","max-width":f+"px ","min-height":g+"px ",filter:"","-ms-filter":""})}}function x(a,c,f,h){a=d.getHeroImageHash(w,a,c);if(-1===a)return-1;c=b.map(a.main,function(a,b){return b})[0];v(c,a.main[c],f,h)}function u(a,b,
c){if("hero-image"!==a.type)return-1;var f=n(a.color,E.getCurrentItem().variant),f=-1!==f?f:0;if(-1===d.getHeroImageHash(w,a.color,f))return-1;var e=E.getCurrentItem();a.thumbnailIndex=e.thumbnailIndex;a.type=e.type;a.variant=e.variant;a.index=f;A(a,b,c)}function A(b,c,f){var e=d.getHeroImageHash(w,b.color,b.index),h;h=b&&G&&a.equals(b,G)?!0:!1;G||(G=b);if(!h&&b||c)x(b.color,b.index,c,f),G=b;J.removeClass("hide-background");a.trigger("dp:image-block:update",e)}var B,w,E,q,F,J,G={};return function(a,
d,f,l){B=this;w=a;E=d;q=l;w.heroImage[w.landingAsinColor]=w.heroImage[w.defaultColor];B.render=function(a,c,d,f,h,l,g){F=f;J=b("#heroImage");a=k(c,a,l);u(E.getCurrentItem(),g,l);return a};B.update=function(a){var b=a.data;"ingress"!==b.type&&J.addClass("hide-background");"swatchHover"===a.type?a.captured||(b.type=E.getCurrentItem().type,-1!==u(b)&&(a.captured=!0)):"hero-image"===b.type&&(A(b),"click"!==a.type&&w.usePeekHover||c.selectGivenThumbnail(a.$declarativeParent,F))};q.register("resize",z)}});
g.when("A","jQuery","imageBlockUtils","postMetric","ImageBlockAltImageView").register("ImageBlockAltImageIngressView",function(a,b,c,d,f){var g,k,n,z;return function(b,d,f,e){g=this;k=b;n=e;g.render=function(b,d,f,e,l,m,n){z=e;g=this;f=k.maxAlts;e=d;l=k.colorImages[b]?k.colorImages[b].length:0;l+=c.getVideosCount(b,k);b=k.heroImage[b];m=0;b&&(m=b.length);b=l+m;b>f&&(f=b-f,b=z.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),
f+="+",e={type:"ingress",index:0,thumbnailIndex:d,variant:""},b.find("#altIngressText").append(f),a.declarative.create(b,"thumb-action",e),z.append(b),e=d++);return e};g.update=function(a){"ingress"===a.data.type&&"click"===a.type&&n.dispatch("imageClick",a)}}});g.when("A","jQuery","imageBlockUtils").register("ImageBlockState",function(a,b,c){return function(a,b,d){this.getImageHash=function(b){var f=d.getCurrentItem();b=c.getIndexForVariant(f.color,b||"MAIN",a);return c.getImageHash(f.color,
b,a)};this.onImageUpdateForTwister=function(a){b.register("updateSelection",function(b){"swatchClick"===b.type&&"function"===typeof a&&a()})}}});g.when("A","jQuery","imageBlockUtils").register("ImageBlockHeroUtils",function(a,b,c){function d(a,b){var c;if(b.repositionHeroImage){c=a[1];var f=a[0];if(768>=(k.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))c*=.7,f*=.7;else{var e=((k.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-
1024)/256,e=Math.max(Math.min(e,1),0);c*=.7+.3*e;f*=.7+.3*e}c=[c,f]}return c}function f(a,b,d){var e;if(d.repositionHeroImage){var l=k.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;d=d.heroFocalPoint;if(c.isDefined(d)){e=Math.max((l-Math.min(1500,a))/2,0);var g=Math.max((l-a)/2,0);e-=g;l=Math.max(Math.min(l,1500),1024);e=e+(l-420-23)/2-a/b[1]*d}}return e}function g(a,d,f){a=a.heroImage;return!(c.isDefined(a)&&c.isDefined(a[d])&&c.isDefined(a[d][f])&&c.isDefined(a[d][f].main))||
1>b.map(a[d][f].main,function(a,b){return b}).length?-1:a[d][f]}return{getHeroImageHash:g,getHeroDimParams:function(a,k,n){if(a.repositionHeroImage){if(!c.isDefined(n)){n=g(a,k.color,k.index);if(-1===n)return;k=b.map(n.main,function(a,b){return b})[0];n=n.main[k]}k=d(n,a);a=f(k[0],n,a);return{height:k[1],width:k[0],xPos:a,yPos:75}}}}});g.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(a,b,c,d,f,
g,n){function r(b,c){var d=a.copy(b);if(n.isDefined(b)&&b.length>c){try{for(var f=-1,e=0;e<b.length;e++){var h=b.charAt(e);if(" "===h||"."===h||"?"===h||";"===h||","===h||":"===h)f=e;if(e===c-4){d=b.substring(0,-1===f?e:f);break}}}catch(l){d=b.substring(0,c-3)}d+="..."}return d}function z(a,b){var c=a.lastIndexOf(".");return a="_"===a.charAt(c-1)?a.substring(0,c-1)+b+a.substring(c):a.substring(0,c)+"."+b+a.substring(c)}return{getDimension:function(a,b){var c=parseInt(a.css(b),10);return isNaN(c)?
0:c},attachTabSelectHandler:function(b,c){a.on("dp:ivTabs:"+b+":select",c)},attachTabDeselectHandler:function(b,c){a.on("dp:ivTabs:"+b+":deselect",c)},attachImmersiveViewResizeHandler:function(b){a.on("dp:image-block:immersive-view:resize",b)},detachImmersiveViewResizeHandler:function(b){a.off("dp:image-block:immersive-view:resize",b)},attachImmersiveViewResetHandler:function(b){a.on("a:popover:afterHide:immersiveView",b)},hideTabHeading:function(a){b("#"+a).hide()},unhideTabHeading:function(a){b("#"+
a).show()},addStyleCodeToURL:z,getResizedThumbnailURL:function(a,b){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,"");var c="_AA50_";b&&(c+="FMpng_RI_");return z(a,c)},populateVariationSelection:function(a){if(n.isDefined(k.DetailPage)&&n.isDefined(k.DetailPage.StateController)){a.empty();var c=k.DetailPage.StateController.getState(),d=c.variation_label_order,
f;for(f in d)if(d.hasOwnProperty(f)){var h=d[f],l=c.selected_variations[h],h=c.variation_display_labels[h];l&&b("<div/>").addClass("ivVariations").text(h+":"+l).appendTo(a)}}},populateTitle:function(a,b,c){a.attr("title",c.title);a.text(r(c.title,b))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,b){a.animate({opacity:.4},100,b)}}});g.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",
function(a,b,c,d,f,g,k,n){function z(){var a=I.getCurrentItem().color;R=L.colorImages[a];O=L.heroImage[a];Q=H=0;f.isDefined(O)&&(Q=O.length);f.isDefined(R)&&(H=R.length)}function v(a){return a.hiRes||a.large||a.main[a.main.length-1]}function x(){var a=y.find("#ivStage").find("#ivLargeImage"),b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var f=d.width(),e=d.height();0<d.length&&(d[0].naturalWidth&&(f=d[0].naturalWidth),d[0].naturalHeight&&(e=d[0].naturalHeight));a.css("cursor",
"auto");var f=0===f?1:f,e=0===e?1:e,h=Math.min(b/f,c/e),l=e*h,g=f*h;1>h?(U?a.css("cursor","url('"+L.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),N=!0):N=!1;f=Math.min(g,f);e=Math.min(l-20,e);d.css({"margin-top":(c-e)/2,"margin-left":(b-f)/2,height:e,width:f});a.css("visibility","visible");T=!1}function u(a){var b=y.find("#ivLargeImage");b.css("visibility","hidden");b.empty();n.animateStageIn(b);b.append(a);x()}function A(a){y.find("#ivLargeImage").css("display",
"none");y.find("#ivLargeImage").css("display","block");var b;"hero-image"===a?f.isDefined(O)&&(b=v(O[M.index])):f.isDefined(R)&&(b=v(R[M.index]));if(f.isDefined(b)){y.find(".fullscreen").remove();var c=d("<img>").attr("src",b).addClass("fullscreen"),e=y.find("#ivLargeImage");n.animateStageOut(e,function(){c.load(function(){u(c)});if(c[0].complete)u(c);else{e.empty();var a=(e.height()-104)/2,b=(e.width()-80)/2;d("<img>").attr("src",L.staticImages.spinner).css({position:"relative",top:a+"px",left:b+
"px"}).appendTo(e)}})}}function B(a){y.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivHeroImage")?M.type="hero-image":M.type="image";M.index=a.attr("id").split("_")[1];A(M.type);k.postCountMetric("dpcc_iv_thumbCLick_"+(parseInt(M.index,10)+1)+"_"+(Q+H))}function w(){y.delegate(".ivThumb","click",function(){var a=d(this);B(a)})}function E(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function q(a){var b=V.top-(a.pageY-Z[1])*ba;a=E(V.left-(a.pageX-Z[0])*ba,W.left);b=E(b,
W.top);y.find(".fullscreen").css({left:a,top:b})}function F(){y.delegate("#ivLargeImage","click",function(a){if(T)x();else if(N){y.find(".fullscreen").removeAttr("style");if(N){var b=y.find("#ivLargeImage"),c=b.find(".fullscreen");U?b.css("cursor","url('"+L.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));T=!0;var d=y.find("#ivLargeImage");W.left=d.width()-c.width();W.top=d.height()-c.height();var d=b.height()/2,f=b.width()/
2;Z=[b.offset().left+f,b.offset().top+d];V.top=d-c.height()/2;V.left=f-c.width()/2;c.css({position:"relative",left:V.left,top:V.top});ba=Math.max(c.height()/b.height(),c.width()/b.width())}q(a);k.postCountMetric("dpcc_iv_largeImageCLick")}});y.delegate("#ivLargeImage","mousemove",function(a){T&&q(a)})}function J(){y.find("#ivLargeImage").empty()}function G(a){if(D){y=d("#ivMain");z();M=I.getCurrentItem();n.populateTitle(y.find("#ivTitle"),160,L);n.populateVariationSelection(y.find("#ivVariationSelection"));
a=y.find("#ivThumbs");a.find(".ivRow").not(".placeholder").remove();for(var b=Q+H,c=0,e=0;c<b;)for(var h=a.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(a),g=0;4>g&&c<b;g++,c++,e++)if(e<Q){var k=O[c].thumb,p=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+c).appendTo(h);p.find(".ivThumbImage").css("background",'url("'+n.getResizedThumbnailURL(k)+'") center no-repeat')}else e>=Q&&e<H+Q&&(k=R[c-Q].thumb,p=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id",
"ivImage_"+(c-Q)).appendTo(h),p.find(".ivThumbImage").css("background",'url("'+n.getResizedThumbnailURL(k)+'") center no-repeat'));aa();D=!1}a=d("#ivImagesTab").height();y.css("height",a);b=y.find("#ivTitle").outerHeight(!0);c=y.find("#ivVariationSelection").outerHeight(!0);e=y.find("#ivThumbs");h=n.getDimension(e,"margin-top")+n.getDimension(e,"margin-bottom");e.css("height",a-b-c-h);y.find("#ivLargeImage").css("height",a);a=y.find("#ivStage");b=y[0]&&y[0].getBoundingClientRect&&Math.floor(y[0].getBoundingClientRect().width)||
y.width();a.css("width",b-n.getDimension(y,"padding-left")-n.getDimension(y,"padding-right")-y.find("#ivThumbColumn").width()-n.getDimension(a,"margin-left")-n.getDimension(a,"margin-right"));M=I.getCurrentItem();a="hero-image"===M.type?y.find("#ivHeroImage_"+M.index):"image"===M.type?y.find("#ivImage_"+M.index):f.isDefined(O)?y.find("#ivHeroImage_"+M.index):y.find("#ivImage_"+M.index);f.isjQueryObjDefined(a)||(a=y.find("#ivImage_0"));B(a)}var P,L,I,y,O,R,Q,H,M,U=navigator.userAgent.match(/msie|trident/i),
D=!0,T=!1,N=!1,W={},V={},ba,Z,D=!0,aa=a.once(function(){w();F();n.attachImmersiveViewResizeHandler(G);n.attachTabDeselectHandler("ivImagesTab",J)});return function(a,b,c,f){P=this;L=a;I=b;P.render=function(a,b,c,f,e,h){D=!0;z();0===Q+H?n.hideTabHeading("ivImagesTabHeading"):n.unhideTabHeading("ivImagesTabHeading");1===Q+H?d("#ivThumbs").hide():d("#ivThumbs").show()};P.update=function(a){};n.attachTabSelectHandler("ivImagesTab",G)}});g.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils",
"ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils","preLoaderHook","lazyLoaderHook").register("ImageBlockImmersiveViewVideos",function(a,b,c,d,f,g,n,r,z,v){function x(){I.delegate(".ivThumb","click",function(){var a=d(this);I.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")&&(y.type="chromeful-video",y.index=a.attr("id").split("_")[1])})}function u(){var a=d("#ivVideosTab").height();I.css("height",a);var b=I.find(".vse-video-block");R=a-r.getDimension(I,
"padding-top")-r.getDimension(I,"padding-bottom");b.css({"max-height":a,overflow:"hidden"});if(T)I.css({"max-width":Math.floor(1.77*R)});else{var a=I.find(".vse-airy-container"),b=I.find(".vse-ib-metadata"),c=Math.floor(R-r.getDimension(b,"height")),f=Math.floor(1.77*c);a.css({"max-height":c,"max-width":f});b.css("max-width",f);N&&(a=I.find(".vse-vertical-scroll"),b=r.getDimension(a,"margin-top")+r.getDimension(a,"margin-bottom"),a.css("max-height",R-b))}}function A(){O&&O.pause();O&&O.pause();W=
!1;U=!0;M=null}function B(){O&&O.pause()}function w(b){M=b.clickTimeStamp;D&&(v.get(a,"#ivVideoBlock",L,aa,ia),I=d("#ivVideoBlock"),P.getCurrentItem(),y=P.getCurrentItem(),V());u();W=!0;D=!1;F()}function E(a){D&&(I=d("#ivVideoBlock"),P.getCurrentItem(),y=P.getCurrentItem(),V());W&&F();u()}function q(a){O=a.airy;W&&O.play({isAsync:!0})}function F(){if(O&&(O.play({isAsync:!0,eventTimestamp:M||(new Date).getTime()}),n.postCountMetric("dpcc_vse_videoBlock_video_played"),U)){var a=k.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),
a=(new Date).getTime()-a,n.postTimeMetric("dpcc_vse_vitff",a),U=!1)}}var J,G,P,L,I,y,O,R,Q,H,M,U=!0,D=!0,T=!1,N=!1,W=!1,V=a.once(function(){x();r.attachImmersiveViewResizeHandler(E);r.attachTabDeselectHandler("ivVideosTab",B);r.attachImmersiveViewResetHandler(A)}),ba=function(a,b,c){d("#ivVideoBlockSpinner").addClass("aok-hidden");n.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+b.placement);a=P.getCurrentItem().color;a=f.getVideoHash(a,0,G);O||(O=f.createAiryInstanceForChromeful(d("#ivVideoBlock"),
a,G.airyConfig,"ImmersiveView"));T=!0;d("#ivVideoBlock").css({"max-width":1.77*R,margin:"0 auto"});W&&T&&O.play({isAsync:!0})},Z=function(a,b,c){D||v.get(a,"#ivVideoBlock",L,aa,ia);d("#ivVideoBlockSpinner").addClass("aok-hidden")},aa=function(a,b,c){N=!0;u();W&&F()},ia=function(a,b,c){n.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+b.pageContext.placement+"_"+b.configuration.type)};return function(b,c,d,e){J=this;G=b;P=c;J.render=function(b,c,d,e,h,l){b=P.getCurrentItem().color;c=f.getVideoHash(b,
0,G);Q=G.colorToAsin[b]&&G.colorToAsin[b].asin;Q=f.isDefined(Q)?Q:G.mediaAsin;H=null!==G.vseVideoDataSourceTreatment&&"T1"===G.vseVideoDataSourceTreatment?"ASIN":"physicalID";D=!0;-1===c?r.hideTabHeading("ivVideosTabHeading"):(r.unhideTabHeading("ivVideosTabHeading"),L={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:c.marketPlaceID,locale:c.languageCode,product:{contentID:Q,contentIDType:"ASIN"},video:{contentID:c.mediaObjectId,contentIDType:H,videoURL:c.url,imageURL:c.slateUrl},
metadata:{ProductTitle:G.title}},z.get(a,"#ivVideoBlock",L,Z,ba))};J.update=function(a){};r.attachTabSelectHandler("ivVideosTab",w);a.on("vseAiry",q)}});g.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView360",function(a,b,c,d,f,g,C,r){function z(a){N.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("iv360Image")&&v()}function v(){N.find("#ivLarge360").css("display",
"none");x();N.find("#ivLarge360").css("display","block");E();var a=N.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});r.animateStageIn(a)},200);A();C.postCountMetric("dppc_click360");X=Date.now()}function x(){0<X&&(u("dppc_duration360",Date.now()-X),X=0)}function u(a,b){k.ue&&k.ue.count(a,b)}function A(){if(0<pa){var a=N.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function B(a,b){if(pa<a.length){var c=d("<img />").css({display:"block",
width:6*Z+"px",height:aa+"px"});c.hide();b.append(c);c.get(0).onload=function(){b.closest(document.documentElement).length&&(pa++,1===pa&&(A(),0<X&&u("dppc_loadTime360",Date.now()-X)),0<fa&&u("dppc_perSpriteloadTime360",Date.now()-fa),N.find("#iv360Spinner").hide(),c.show(),ka=5*V.imageLocations[Math.floor(ua/V.imageLocations[0].length)][ua%V.imageLocations[0].length],B(a,b))};c.attr("src",a[pa].replace(/(\._SP)\d+(,)\d+/,"$1"+na+"$2"+ia));fa=Date.now()}}function w(a){if(f.isDefined(V.spriteWidthSizes)&&
0<V.spriteWidthSizes.length){var b=V.spriteWidthSizes,c=b.length,d=b[0],e=b[c-1];if(a<=d)return d;if(a>e)return e;for(d=0;d<c;d++)if(a>b[d]&&a<=b[d+1])return b[d+1]}else return a}function E(){var a=N.find("#ivLarge360");a.children("#image-360-sprites").length||(a.append("<div id='image-360-sprites'></div>"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),
d("<img>").attr("src",D.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),ra=!0,q())}function q(){if(f.isDefined(V.spriteURLs)&&f.isDefined(N)&&ra&&!ha){var a=N.find("#ivLarge360"),b=d("<div>").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});f.isDefined(V.staticImages.hint360)&&d("<img>").css({"margin-left":"auto","margin-right":"auto",
display:"block"}).attr("src",V.staticImages.hint360).appendTo(b);d("<div>").css({"text-align":"center"}).text(D.staticStrings.dragToSpin).appendTo(b);b.appendTo(a);var b=V.imageWidth,c=V.imageHeight,e=a.parent().width(),h=a.parent().height(),g=0,k=0;b/c>e/h?(na=w(e),ia=Math.round(c/b*na),Z=Math.ceil(e),aa=Math.ceil(ia/na*e),k=(h-aa)/2):(ia=w(h),na=Math.round(b/c*ia),aa=Math.ceil(h),Z=Math.ceil(na/ia*h),g=(e-Z)/2);a.css({"margin-left":g,"margin-top":k,width:Z+"px",height:aa+"px",overflow:"hidden",
position:"relative"});a.children("#image-360-sprites").css("width",6*Z+"px");B(V.spriteURLs,N.find("#image-360-sprites"),0);b=N.find("#ivLarge360");b.bind("mousedown",P);b.bind("touchstart",F);b.bind("touchmove",J);b.bind("touchend",G);d(document).bind("mousemove",L);d(document).bind("mouseup",I);f.isDefined(D.staticImages.grab)&&a.css("cursor","url('"+D.staticImages.grab+"'), auto");ha=!0}}function F(a){oa=!0;ea=a.originalEvent.targetTouches[0].clientX}function J(a){oa&&(y(a.originalEvent.targetTouches[0].clientX-
ea),ea=a.originalEvent.targetTouches[0].clientX)}function G(a){oa&&(oa=!1)}function P(a){S=!0;sa=a.originalEvent.clientX;f.isDefined(D.staticImages.grabbing)&&(a=N.find("#ivLarge360"),a.css("cursor","url('"+D.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+D.staticImages.grabbing+"'), auto"));return!1}function L(a){S&&(y(a.originalEvent.clientX-sa),sa=a.originalEvent.clientX)}function I(a){S&&(S=!1,f.isDefined(D.staticImages.grab)&&(a=N.find("#ivLarge360"),
a.css("cursor","url('"+D.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function y(a){for(a=ka-=a/Z*180;0>a;)a+=360;for(;360<a;)a-=360;ka=a;var b;a=360;for(var c=0;c<pa;c++)for(var d=0;d<V.imageLocations[c].length;d++){var e=Math.abs(ka-5*V.imageLocations[c][d]);e<a&&(a=e,b=c*V.imageLocations[0].length+d)}b!==ua&&(a=Math.floor(b/V.imageLocations[0].length),a!==Math.floor(ua/V.imageLocations[0].length)&&(f.isDefined(ca)||(ca=document.createElement("canvas").getContext("2d")),
c=N.find("#image-360-sprites").children(),ca.drawImage(c[a],0,0)),a=N.find(".iv360Hint").not(".iv360HintFaded"),f.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));ua=b;a=b%V.imageLocations[0].length*-1*Z;b=-1*Math.floor(b/V.imageLocations[0].length)*aa;c=N.find("#ivLarge360").children("#image-360-sprites");c.css("-webkit-transform","translate3d("+a+"px, "+b+"px, 0)");c.css("transform","translate3d("+a+"px, "+b+"px, 0)")}function O(){N.delegate(".ivThumb","click",function(){var a=
d(this);z(a)})}function R(){x()}function Q(a){if(t){N=d("#ivMain360");a=T.getCurrentItem().color;ba=M()&&D.spin360ColorEnabled[a];V=M()?D.spin360ColorData[a]:n;T.getCurrentItem();ba&&(W=1);r.populateTitle(N.find("#ivTitle360"),160,D);r.populateVariationSelection(N.find("#ivVariationSelection360"));a=N.find("#ivThumbs360");a.find(".ivRow").not(".placeholder").remove();for(var b=W,c=0,e=0;c<b;)for(var h=a.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(a),g=0;3>g&&c<b;g++,c++,
e++)e<W&&a.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(h).find(".ivThumbImage").css("background",'url("'+(f.isDefined(D.staticImages.icon360)?r.getResizedThumbnailURL(D.staticImages.icon360,!0):"")+'") center no-repeat');N.find("#ivLarge360").empty();pa=0;t=ha=ra=!1;qa();t=!1}a=d("#iv360Tab").height();N.css("height",a);b=N.find("#ivTitle360").outerHeight(!0);c=N.find("#ivVariationSelection360").outerHeight(!0);e=N.find("#ivThumbs360");
h=r.getDimension(e,"margin-top")+r.getDimension(e,"margin-bottom");e.css("height",a-b-c-h);a=N.find("#ivStage360");b=N[0]&&N[0].getBoundingClientRect&&Math.floor(N[0].getBoundingClientRect().width)||N.width();a.css("width",b-r.getDimension(N,"padding-left")-r.getDimension(N,"padding-right")-N.find("#ivThumbColumn360").width()-r.getDimension(a,"margin-left")-r.getDimension(a,"margin-right"));T.getCurrentItem();a=N.find("#iv360");f.isDefined(a)&&0!==N.height()&&(f.isjQueryObjDefined(a)||(a=N.find("#ivImage_0")),
z(a))}function H(a){var b=D.colorToAsin[a],c={},d=500;if(b&&b.asin){c.params={asin:b.asin};var e="360"+b.asin,h=Date.now();c.success=function(b){u("dppc_asyncRequestTime360",Date.now()-h);b&&f.isDefined(b.spin360.spin360Model)?(f.ajaxState(e,"success"),D.spin360ColorData[a]=b.spin360.spin360Model,a===T.getCurrentItem().color&&(V=D.spin360ColorData[a],q())):c.error()};c.error=function(){C.postCountMetric("dppc_asyncFailed360");u("dppc_asyncRequestTime360",Date.now()-h);d*=2;16E3>=d?setTimeout(function(){h=
Date.now();g.load("/gp/product/features/apparel-main-image/360.html",c)},d):f.ajaxState(e,"fail")};f.ajaxState(e)&&"fail"!==f.ajaxState(e)||(g.load("/gp/product/features/apparel-main-image/360.html",c),f.ajaxState(e,"sent"))}}function M(){return f.isDefined(D.spin360ConfigEnabled)&&D.spin360ConfigEnabled}var U,D,T,N,W,V,ba,Z,aa,ia,na,sa,ea,ra=!1,ha=!1,ka=0,ua=0,X=0,fa=0,S=!1,oa=!1,pa=0,ca,t=!0,qa=a.once(function(){O();r.attachImmersiveViewResizeHandler(Q);r.attachTabDeselectHandler("iv360Tab",R)});
return function(b,c,e,h){U=this;D=b;T=c;M()&&(D.spin360ColorData[D.landingAsinColor]=D.spin360ColorData[D.defaultColor],D.spin360ColorEnabled[D.landingAsinColor]=D.spin360ColorEnabled[D.defaultColor]);f.isDefined(D.staticImages.icon360)&&d("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",r.addStyleCodeToURL(D.staticImages.icon360,"_FMpng_RI_"));U.render=function(b,c,e,h,g,k){t=!0;M()&&D.spin360ColorEnabled[b]?(f.isDefined(D.spin360ColorData[b])||(D.spin360ColorData[b]=
{},H(b)),d("#ivThumbs360").hide(),r.unhideTabHeading("iv360TabHeading")):r.hideTabHeading("iv360TabHeading");f.isImmersiveViewEnabled(D,T.getCurrentItem().color)&&M()&&D.spin360ColorEnabled[b]&&(c===D.maxAlts&&(b=h.find(".item.imageThumbnail"),e=h.find(".item.videoThumbnail"),f.isDefined(e)&&1<e.length?e.last().remove():b.last().remove(),c--),b=h.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),a.declarative.create(b,"button-360-click"),
h.append(b),c++,C.postCountMetric("dppc_display360"));return c};U.update=function(a){};r.attachTabSelectHandler("iv360Tab",Q)}});var d=k.location.host,b={dub:"https://www.amazon.co.uk/vap/ew/",pdx:"https://www.amazon.co.jp/vap/ew/"},c=d.split(".")[1],f=-1===d.indexOf(".proxy.amazon.com")?"/vap/ew/":b[c]!==n?b[c]:"https://www.amazon.com/vap/ew/";g.when("postMetric").register("preLoaderHook",function(a){function b(c,d){var g=c.A,k=c.block,n=c.request,r=c.handleFailure,z=c.handleSuccess,
v=d,x=g.$;d--;var u=v-d-1,A=(new Date).getTime();g.ajax(f+"componentbuilder",{params:n,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:n.timeout||4E3,withCredentials:!0,success:function(b){var c=(new Date).getTime()-A;a.postTimeMetric("vse_preLoaderHook:success:",c);a.postCountMetric("vse_preLoaderHook:success:"+n.page+":"+n.placement+":"+u);x(k).html(b);z(g,n,b)},error:function(f){(0===f.http.status||500<=f.http.status&&599>=f.http.status)&&0<d?(a.postCountMetric("vse_preLoaderHook:error:"+
n.page+":"+n.placement+":"+u),b(c,d)):r(g,n,f)}})}return{get:function(a,c,d,f,g){b({A:a,block:c,request:d,handleFailure:g,handleSuccess:f},3)}}});g.when("postMetric").register("lazyLoaderHook",function(a){function b(c,d,g){var k=c.A,n=c.context,r=c.handleFailure,z=c.handleSuccess;d.attr("data-configuration");var v=atob(d.attr("data-configuration")),x=JSON.parse(v),v=g,u={pageContext:n,configuration:x},A=(new Date).getTime();g--;var B=v-g-1;k.ajax(f+"subcomponent/"+x.type,{params:u,paramsFormat:"json",
method:"post",contentType:"application/json",timeout:n.timeout||4E3,withCredentials:!0,success:function(b){var c=(new Date).getTime()-A;a.postTimeMetric("vse_lazyLoaderHook:success:",c);a.postCountMetric("vse_lazyLoaderHook:success:"+n.page+":"+n.placement+":"+x.type+":"+B);d.html(b);z(k,u,b)},error:function(f){(0===f.http.status||500<=f.http.status&&599>=f.http.status)&&0<g?(a.postCountMetric("vse_lazyLoaderHook:error:"+n.page+":"+n.placement+":"+x.type+":"+B),b(c,d,g)):r(k,u,f)}})}return{get:function(a,
c,d,f,g){var k=a.$;k(c+" div[data-configuration]").each(function(){b({A:a,context:d,handleFailure:g,handleSuccess:f},k(this),3)})}}})});